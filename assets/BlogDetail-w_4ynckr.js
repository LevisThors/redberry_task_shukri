import{r as h,a as Z,j as i,u as X}from"./index-n4qGkUBx.js";import{u as ee,C as te,a as se}from"./CardSkeleton-qRW5JwMH.js";import{u as ne,M as ae,m as ie,i as re,f as oe,c as le,b as ce,d as ue,S as de,H as fe,v as B,s as me,e as he,g as ge,h as pe,j as ye,k as xe,r as Ae,l as z,n as be,o as ve,p as Se,q as je,t as O,w as Ee,x as we,a as Ne}from"./CategorySlider-uSorp08_.js";function Me(e){const t=ne(()=>ie(e)),{isStatic:n}=h.useContext(ae);if(n){const[,s]=h.useState(e);h.useEffect(()=>t.on("change",s),[])}return t}function q(e,t,n){var s;if(typeof e=="string"){let a=document;t&&(re(!!t.current),a=t.current),n?((s=n[e])!==null&&s!==void 0||(n[e]=a.querySelectorAll(e)),e=n[e]):e=a.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}function De(e,t){let n;const s=()=>{const{currentTime:a}=t,o=(a===null?0:a.value)/100;n!==o&&e(o),n=o};return oe.update(s,!0),()=>le(s)}const Te=ce(()=>window.ScrollTimeline!==void 0);class ${constructor(t){this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t){const n=this.animations.map(s=>{if(Te()&&s.attachTimeline)s.attachTimeline(t);else return s.pause(),De(a=>{s.time=s.duration*a},t)});return()=>{n.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Be(e){return typeof e=="object"&&!Array.isArray(e)}function Ce(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=ue(e)?new de(t,{enableHardwareAcceleration:!1}):new fe(t,{enableHardwareAcceleration:!0});n.mount(e),B.set(e,n)}function Ve(e,t=100){const n=me({keyframes:[0,t],...e}),s=Math.min(he(n),ge);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:pe(s)}}function R(e,t,n,s){var a;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:(a=s.get(t))!==null&&a!==void 0?a:e}const Le=(e,t,n)=>{const s=t-e;return((n-e)%s+s)%s+e};function ke(e,t){return ye(e)?e[Le(0,e.length,t)]:e}function Ie(e,t,n){for(let s=0;s<e.length;s++){const a=e[s];a.at>t&&a.at<n&&(Ae(e,a),s--)}}function Ge(e,t,n,s,a,r){Ie(e,a,r);for(let o=0;o<t.length;o++)e.push({value:t[o],at:xe(a,r,s[o]),easing:ke(n,o)})}function _e(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Fe="easeInOut";function Ke(e,{defaultTransition:t={},...n}={},s){const a=t.duration||.3,r=new Map,o=new Map,d={},u=new Map;let p=0,l=0,E=0;for(let S=0;S<e.length;S++){const c=e[S];if(typeof c=="string"){u.set(c,l);continue}else if(!Array.isArray(c)){u.set(c.name,R(l,c.at,p,u));continue}let[y,x,m={}]=c;m.at!==void 0&&(l=R(l,m.at,p,u));let g=0;const w=(A,b,j,M=0,D=0)=>{const f=Re(A),{delay:T=0,times:N=be(f),type:Q="keyframes",...U}=b;let{ease:C=t.ease||"easeOut",duration:v}=b;const V=typeof T=="function"?T(M,D):T,L=f.length;if(L<=2&&Q==="spring"){let _=100;if(L===2&&We(f)){const Y=f[1]-f[0];_=Math.abs(Y)}const F={...U};v!==void 0&&(F.duration=je(v));const K=Ve(F,_);C=K.ease,v=K.duration}v??(v=a);const k=l+V,I=k+v;N.length===1&&N[0]===0&&(N[1]=1);const G=N.length-f.length;G>0&&ve(N,G),f.length===1&&f.unshift(null),Ge(j,f,C,N,k,I),g=Math.max(V+v,g),E=Math.max(I,E)};if(z(y)){const A=H(y,o);w(x,m,P("default",A))}else{const A=q(y,s,d),b=A.length;for(let j=0;j<b;j++){x=x,m=m;const M=A[j],D=H(M,o);for(const f in x)w(x[f],He(m,f),P(f,D),j,b)}p=l,l+=g}}return o.forEach((S,c)=>{for(const y in S){const x=S[y];x.sort(_e);const m=[],g=[],w=[];for(let b=0;b<x.length;b++){const{at:j,value:M,easing:D}=x[b];m.push(M),g.push(Se(0,E,j)),w.push(D||"easeOut")}g[0]!==0&&(g.unshift(0),m.unshift(m[0]),w.unshift(Fe)),g[g.length-1]!==1&&(g.push(1),m.push(null)),r.has(c)||r.set(c,{keyframes:{},transition:{}});const A=r.get(c);A.keyframes[y]=m,A.transition[y]={...t,duration:E,ease:w,times:g,...n}}}),r}function H(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function P(e,t){return t[e]||(t[e]=[]),t[e]}function Re(e){return Array.isArray(e)?e:[e]}function He(e,t){return e[t]?{...e,...e[t]}:{...e}}const Pe=e=>typeof e=="number",We=e=>e.every(Pe);function J(e,t,n,s){const a=q(e,s),r=a.length,o=[];for(let d=0;d<r;d++){const u=a[d];B.has(u)||Ce(u);const p=B.get(u),l={...n};typeof l.delay=="function"&&(l.delay=l.delay(d,r)),o.push(...Ee(p,{...t,transition:l},{}))}return new $(o)}const ze=e=>Array.isArray(e)&&Array.isArray(e[0]);function Oe(e,t,n){const s=[];return Ke(e,t,n).forEach(({keyframes:r,transition:o},d)=>{let u;z(d)?u=O(d,r.default,o.default):u=J(d,r,o),s.push(u)}),new $(s)}const qe=e=>{function t(n,s,a){let r;return ze(n)?r=Oe(n,s,e):Be(s)?r=J(n,s,a,e):r=O(n,s,a),e&&e.animations.push(r),r}return t},W=qe(),$e=e=>{const[t,n]=h.useState({}),[s,a]=h.useState(!0),[r,o]=h.useState(null);return h.useEffect(()=>{(async()=>{try{const u=await Z.get(`https://api.blog.redberryinternship.ge/api/blogs/${e}`,{headers:{Authorization:"Bearer 3a346421bef42b8d9a84587ff8430fc6371b1f9d0932211161fdf1c4d49db3f0"}});n(u.data),a(!1)}catch(u){o(u),a(!1)}})()},[e]),{blog:t,loading:s,error:r}},Je=({categories:e})=>{const t=h.useMemo(()=>e==null?void 0:e.map(c=>c.id.toString()),[e]),{blogs:n,loading:s,error:a}=ee(t),[r,o]=h.useState(!0),[d,u]=h.useState(!1),p=h.useRef(null),l=Me(0);h.useEffect(()=>{l.onChange(c=>{o(c>=.9),p.current&&u(c<=p.current.offsetWidth-p.current.scrollWidth)})},[l]);const E=()=>{r||W(l,l.get()+415,{type:"spring",stiffness:500,damping:30})},S=()=>{!d&&n.length>3&&W(l,l.get()-415,{type:"spring",stiffness:500,damping:30})};return i.jsxs("section",{children:[i.jsxs("div",{className:"similar-slider-header",children:[i.jsx("h2",{className:"similar-slider-title",children:"მსგავსი სტატიები"}),i.jsxs("div",{className:"similar-slider-buttons",children:[i.jsx("img",{src:"/assets/icon_arrow_left.svg",width:44,height:44,onClick:E,className:r?"similar-slider-buttons-disabled":"similar-slider-buttons-active"}),i.jsx("img",{src:"/assets/icon_arrow_right.svg",width:44,height:44,onClick:S,className:d||n.length<4?"similar-slider-buttons-disabled":"similar-slider-buttons-active"})]})]}),i.jsx("div",{className:"similar-slider",children:i.jsx(we.div,{ref:p,className:"similar-slider-inner",style:{x:l},children:n.length<1?i.jsx("p",{children:"მსგავსი ბლოგები არ მოიძებნა"}):s||a?[1,2,3,4].map(c=>i.jsx(te,{},c)):n.map((c,y)=>i.jsx(se,{content:c},y))})})]})},Ze=()=>{const{id:e}=X(),{blog:t,loading:n}=$e(e);return n?i.jsx("div",{children:"Loading..."}):i.jsx("section",{className:"blog-details-page-wrapper",children:i.jsxs("div",{className:"blog-details-page",children:[i.jsx("div",{className:"blog-details-container",children:i.jsxs("div",{className:"blog-details",children:[i.jsx("div",{className:"blog-details-image-container",children:i.jsx("img",{src:t.image,alt:t.title})}),i.jsxs("div",{className:"blog-details-header",children:[i.jsxs("div",{className:"blog-details-header-top",children:[i.jsx("span",{className:"blog-details-header-author",children:t.author}),i.jsxs("div",{className:"blog-details-header-date",children:[i.jsx("span",{children:new Date(t.publish_date).toLocaleDateString("en-GB").replace(/\//g,".")}),i.jsx("span",{children:" • "+t.email})]})]}),i.jsx("h1",{children:t.title}),i.jsx(Ne,{categories:t.categories,size:"small"})]}),t.description.split(`
`).map((s,a)=>s.trim()!==""&&i.jsx("p",{className:"blog-details-description",children:s},a))]})}),i.jsx(Je,{categories:t.categories})]})})};export{Ze as default};
