import{r as u,j as e,B as v,a as _}from"./index-yPggFfX_.js";import{a as w}from"./CategorySlider-2TCJorYQ.js";const y=({label:r,type:c,value:t,onChange:o,error:d,validation:i,required:g,placeholder:j,name:a,fail:p,success:m,cancelValidation:N=!1})=>{let x;try{x=JSON.parse(localStorage.getItem("formData")||"")[a]}catch{console.log()}const[h,f]=u.useState(!1),[S,s]=u.useState(!1);u.useEffect(()=>{x&&f(!0);try{x.email&&s(!0)}catch{console.log()}m&&f(!1)},[x,m]);const n=()=>{h||f(!0),a==="email"&&!S&&s(!0)};return e.jsxs("div",{className:"input-container",children:[e.jsxs("label",{className:"input-label",children:[r,g&&"*"]}),c==="textarea"?e.jsx("textarea",{name:a,value:t,onChange:o,onFocus:n,className:`input input-textarea ${h&&i&&Object.values(i).some(l=>!l)?"input-danger":h&&"input-success"}`,required:g,placeholder:j}):e.jsx("input",{name:a,type:c,value:t,onChange:o,onFocus:n,className:`input ${N?"":h&&i&&Object.values(i).some(l=>!l)?"input-danger":h&&"input-success"} ${p&&h&&"input-danger"}
                    ${a==="email"&&t===""&&"input-important"}`,required:g,placeholder:j}),d&&e.jsxs("p",{className:"input-error",children:[e.jsx("img",{src:"assets/icon_danger.svg",width:20,height:20}),d]}),i&&e.jsx("ul",{className:`input-validation-container ${a==="email"&&"input-validation-email"} ${Object.keys(i).length===1&&"input-validation-single"}`,children:Object.keys(i).map(l=>e.jsx("li",{className:`input-validation ${h?i[l]?"input-validation-pass":"input-validation-fail":""}`,children:a==="email"&&t!==""&&!i[l]?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"/assets/icon_danger.svg",width:20,height:20}),l]}):a==="email"?"":l},l))})]})},F=({label:r,required:c,categories:t,setCategories:o,success:d})=>{const[i,g]=u.useState([]),[j,a]=u.useState(t),[p,m]=u.useState(!1),[N,x]=u.useState(!1),h=s=>{a(n=>[...n,...t.filter(l=>l.id==s)]),g(i.filter(n=>n.id!=s)),o(n=>n.split(",").filter(l=>l!=s).join(","))},f=s=>{g(n=>[...n,...t.filter(l=>l.id==s)]),o(n=>n?n+","+s:s),a(n=>n.filter(l=>l.id!=s))},S=()=>{m(s=>!s),x(!0)};return u.useEffect(()=>{a(t);const s=localStorage.getItem("categoriesToSubmit");g(t.filter(n=>s==null?void 0:s.split(",").includes(n.id.toString()))),s&&x(!0)},[t,d]),e.jsxs(e.Fragment,{children:[p&&e.jsx("span",{className:"input-select-close-overlay",onClick:S}),e.jsxs("div",{className:"input-container input-select-container",children:[e.jsxs("label",{className:"input-label",children:[r,c&&"*"]}),e.jsxs("span",{className:`input input-select ${p?"input-select-focus":i.length>0?N&&"input-success":N&&"input-danger"} `,children:[e.jsx("span",{className:"input-select-toggler",onClick:S,children:e.jsx("img",{src:"/assets/icon_open.svg",alt:"Open category masonry",width:20,height:20})}),e.jsx(w,{remove:h,categories:i})]}),p&&e.jsx("span",{className:"input-select-masonry",children:j.map(s=>e.jsx("span",{className:"input-select-item",style:{backgroundColor:s.background_color,color:s.text_color},onClick:()=>f(s.id.toString()),children:s.title},s.id))})]})]})},O=({handleClose:r})=>{const[c,t]=u.useState(""),[o,d]=u.useState(""),[i,g]=u.useState(!1),j=m=>{t(m.target.value)},a=m=>{d(m)},p=()=>{!c||c.split("@")[1]!=="redberry.ge"?d("მეილი უნდა მთავრდებოდეს @redberry.ge-ით"):M(c,g,a)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"login-overlay",onClick:r}),e.jsx("div",{className:"login-container",children:i?e.jsx(b,{handleClose:r,successText:"წარმატებული ავტორიზაცია",success:!0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-close-container",children:e.jsx("img",{onClick:r,className:"login-close",src:"/assets/icon_close.svg",width:24,height:24})}),e.jsx("h1",{className:"login-title",children:"შესვლა"})]}),e.jsx("div",{className:"login-input",children:e.jsx(y,{name:"email",type:"email",label:"ელ-ფოსტა",value:c,onChange:j,error:o,placeholder:"Example@redberry.ge",cancelValidation:!0})}),e.jsx("div",{className:"login-button-container",children:e.jsx(v,{text:"შესვლა",onClick:p})})]})})]})},b=({handleClose:r,successText:c,errorText:t,backText:o,href:d,success:i})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"login-close-container",children:e.jsx("img",{onClick:r,className:"login-close",src:"/assets/icon_close.svg",width:24,height:24})}),e.jsxs("div",{className:"login-success",children:[i?e.jsx("img",{src:"/assets/icon_success.svg",width:64,height:64}):e.jsx("img",{src:"/assets/icon_white_x.svg",width:64,height:64,className:"login-error-icon"}),e.jsx("h1",{className:"login-title",children:i?c:t})]}),e.jsx("div",{className:"login-return-button-container",children:e.jsx(v,{text:o||"კარგი",onClick:r,href:d||void 0})})]}),M=(r,c,t)=>{_.post("https://api.blog.redberryinternship.ge/api/login",{email:r}).then(()=>{c(!0),localStorage.setItem("isAuthorized","true")}).catch(o=>{o.response&&o.response.data.message==="The selected email is invalid."?t("ელ-ფოსტა არ მოიძებნა"):t("სცადეთ მოგვიანებით"),localStorage.setItem("isAuthorized","false")})},k=Object.freeze(Object.defineProperty({__proto__:null,SuccessModal:b,default:O},Symbol.toStringTag,{value:"Module"}));export{y as I,k as L,F as S,b as a};
